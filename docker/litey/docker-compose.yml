services:
  litey:
    container_name: litey
    build:
      context: ../../repo/litey
    networks:
      - default
      - traefik
    labels:
      - traefik.enable=true
      - traefik.http.routers.r4.rule=Host(`litey.trade`)
      - traefik.http.routers.r4.tls=true
      - traefik.http.routers.r4.tls.certResolver=letsencrypt
      - traefik.http.routers.r4.tls.domains[0].main=litey.trade
      - traefik.http.routers.r4.tls.domains[0].sans=*.litey.trade
      - traefik.http.routers.r4.service=s4
      - traefik.http.services.s4.loadbalancer.server.port=8000
    environment:
      - MONGO_URI=mongodb+srv://cluster0.xwewvby.mongodb.net/
      - MONGO_USER=yuuki
      - MONGO_PASSWORD=${MONGO_PASSWORD}

networks:
  traefik:
    external: true
    name: traefik
